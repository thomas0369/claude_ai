# Dashboard Upgrade Plan - Professional Data Management & Analysis

**Date:** November 8, 2025
**Status:** ğŸ“‹ PLANNING
**Requested By:** User

---

## ğŸ¯ Requirements Summary

### 1. **Editable Table with Data Validation Workflow**
- Edit imported PDF data directly in table
- Track validation status: `imported` â†’ `validated`
- Verify and correct information before analysis

### 2. **Advanced Filtering System**
- Multi-column filters
- Filter by manufacturer, power range, efficiency, certification status
- Quick filters + advanced filter builder
- Save filter presets

### 3. **Professional Chart System for Competitive Analysis**
- Interactive visualizations
- Multi-dimensional analysis
- Export-quality charts
- Real-time data updates

---

## ğŸ“Š Current State Analysis

### Existing Features âœ…
- âœ… Basic search (single text field)
- âœ… Column sorting (asc/desc/none)
- âœ… Column visibility toggle (grouped by category)
- âœ… Row selection
- âœ… CSV/Excel export
- âœ… Pagination (10/25/50/100 per page)
- âœ… Responsive design

### Missing Features âŒ
- âŒ **Inline editing** - Table is read-only
- âŒ **Validation workflow** - No status tracking
- âŒ **Advanced filters** - Only basic text search
- âŒ **Professional charts** - Limited visualization options
- âŒ **Data versioning** - No edit history
- âŒ **Bulk edit** - Can't edit multiple rows

---

## ğŸ—ï¸ Architecture Design

### Technology Stack

| Component | Current | Recommended Upgrade | Reason |
|-----------|---------|---------------------|--------|
| **Table** | Custom React | **AG Grid Enterprise** | Industry-leading editable grid with validation |
| **Charts** | Apache ECharts (basic) | **Apache ECharts Pro** + Custom Configs | Already in stack, just enhance configs |
| **Filtering** | Simple search | **Advanced Filter Builder** | Multi-column, operators, presets |
| **State Management** | Local useState | **Zustand** or keep useState | Depends on complexity |
| **Validation** | None | **Zod + Custom Validators** | Already using Zod |

### Why AG Grid Enterprise?

**AG Grid is ALREADY in your package.json!** (Line 29: `"ag-grid-react": "^32.3.3"`)

âœ… **Inline cell editing** - Double-click to edit
âœ… **Validation** - Cell-level validation with error indicators
âœ… **Rich editing** - Number spinners, dropdowns, date pickers
âœ… **Undo/Redo** - Track changes
âœ… **Row status** - Custom cell renderers for validation status
âœ… **Column filters** - Built-in advanced filtering
âœ… **Export** - Excel/CSV with custom formatting
âœ… **Performance** - Handles 100,000+ rows smoothly

---

## ğŸ¨ UI/UX Design

### 1. Enhanced Product Analysis Table

#### A. Inline Editing Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Product Analysis (Editable)               [Edit Mode Toggle]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Filter: [Manufacturer â–¼] [Power Range] [Status â–¼] [+ More]  â”‚
â”‚ Search: [_______________ğŸ”]         [Save Filter] [Clear]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜ â”‚Status    â”‚Manufacturerâ”‚Model       â”‚Power â”‚Efficiencyâ”‚  â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â˜ â”‚ğŸŸ¡Importedâ”‚GoodWe      â”‚GW100K07-ETCâ”‚100kW â”‚96.5%     â”‚  â”‚
â”‚   â”‚          â”‚            â”‚ [Double-click to edit cells] â”‚  â”‚
â”‚ â˜ â”‚âœ…Validatedâ”‚Huawei     â”‚LUNA2000    â”‚213kW â”‚97.5%     â”‚  â”‚
â”‚ â˜ â”‚ğŸŸ¡Importedâ”‚Sungrow     â”‚SC125HX     â”‚127kW â”‚96.8%     â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   [Bulk Edit] [Validate Selected] [Export] [Charts]
```

**Key Features:**
- **Status Column:**
  - ğŸŸ¡ `Imported` - From PDF extraction, needs validation
  - âšª `Review` - Being reviewed by user
  - âœ… `Validated` - User confirmed accuracy
  - âŒ `Rejected` - Data incorrect, needs re-extraction

- **Editable Cells:**
  - Double-click any cell to edit
  - Number fields: Spinner controls
  - Text fields: Text input with autocomplete
  - Dropdown fields: Select from options
  - Tab to next field

- **Validation Indicators:**
  - âŒ Red border - Invalid value
  - âš ï¸ Yellow border - Warning (unusual value)
  - âœ… Green border - Valid & saved
  - ğŸ“ Gray border - Unsaved changes

#### B. Validation Workflow

```
PDF Import
    â†“
Status: "imported" (ğŸŸ¡ Yellow)
    â†“
User Reviews Data
    â†“
[Edit] â†’ Edit cells â†’ [Save Changes]
    â†“
[Mark as Validated] Button
    â†“
Status: "validated" (âœ… Green)
    â†“
Included in Analysis & Charts
```

**Workflow Actions:**
1. **Individual Validation:**
   - Select row â†’ Edit fields â†’ Click "Validate" button
   - Row status changes: `imported` â†’ `validated`

2. **Bulk Validation:**
   - Select multiple rows (checkbox)
   - Click "Validate Selected" button
   - All selected rows marked as validated

3. **Reject & Re-import:**
   - Mark problematic data as "rejected"
   - Trigger re-extraction from PDF
   - Or manually correct values

### 2. Advanced Filtering System

#### A. Quick Filters (Always Visible)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Quick Filters:                                            â”‚
â”‚ [All Manufacturers â–¼] [Power: Any â–¼] [Status: All â–¼]    â”‚
â”‚ [Efficiency: >95% â–¼] [Certification: VDE â–¼]              â”‚
â”‚                                    [+ Advanced Filters]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Quick Filter Options:**
- **Manufacturer:** Multi-select dropdown (GoodWe, Huawei, Sungrow...)
- **Power Range:** Presets (50-100kW, 100-200kW, 200-500kW, Custom)
- **Status:** All, Imported, Validated, Review, Rejected
- **Efficiency:** >95%, >96%, >97%, >98%, Custom range
- **Certification:** VDE, CE, UL, ISO, Multiple

#### B. Advanced Filter Builder

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Advanced Filter Builder                         [Ã— Close] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Match: â¦¿ All conditions  â—‹ Any condition                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. [Power (kW)    â–¼] [is greater than â–¼] [100  ]  [Ã—]   â”‚
â”‚ 2. [Efficiency (%)â–¼] [is between      â–¼] [96-98]  [Ã—]   â”‚
â”‚ 3. [Manufacturer  â–¼] [is one of       â–¼] [ğŸ”½...]  [Ã—]   â”‚
â”‚                                           [+ Add Rule]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Save as preset: [High-Efficiency >96%  ] [Save]         â”‚
â”‚                                                           â”‚
â”‚ [Apply Filter] [Clear All] [Cancel]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Filter Operators:**
- **Numeric:** `=, â‰ , <, >, â‰¤, â‰¥, between, not between`
- **Text:** `equals, contains, starts with, ends with, regex`
- **Multi-select:** `is one of, is not one of`
- **Date:** `before, after, between, last 30 days`
- **Boolean:** `is, is not`

#### C. Saved Filter Presets

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Saved Filters:                                            â”‚
â”‚ [All Products] [High Power >200kW] [Top Efficiency]      â”‚
â”‚ [Needs Validation] [German Certified] [+ Custom...]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Preset Examples:**
1. **High Power Systems:** Power >200kW, Status=Validated
2. **Top Efficiency:** Efficiency >97.5%, Validated
3. **Needs Validation:** Status=Imported, Source=PDF
4. **German Certified:** Certification includes VDE-AR-N
5. **Recent Imports:** Imported in last 7 days

### 3. Professional Chart System

#### A. Chart Dashboard Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Competitive Analysis Charts           [Chart Library â–¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  Efficiency vs     â”‚ â”‚   Market Share Distribution  â”‚ â”‚
â”‚ â”‚  Power Rating      â”‚ â”‚   [Pie Chart]                â”‚ â”‚
â”‚ â”‚  [Scatter Plot]    â”‚ â”‚                               â”‚ â”‚
â”‚ â”‚                    â”‚ â”‚   Huawei 23%                 â”‚ â”‚
â”‚ â”‚      â€¢  â€¢  â€¢       â”‚ â”‚   GoodWe 18%                 â”‚ â”‚
â”‚ â”‚    â€¢  â€¢    â€¢       â”‚ â”‚   Sungrow 15%                â”‚ â”‚
â”‚ â”‚  â€¢      â€¢     â€¢    â”‚ â”‚   Others 44%                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ â”‚  Power Density Comparison (Top 10 Products)           â”‚
â”‚ â”‚  [Bar Chart - Horizontal]                             â”‚
â”‚ â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Product A - 771 kW/mÂ³      â”‚
â”‚ â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Product B - 650 kW/mÂ³           â”‚
â”‚ â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Product C - 580 kW/mÂ³                â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  Efficiency Trend  â”‚ â”‚   Price vs Performance       â”‚ â”‚
â”‚ â”‚  [Line Chart]      â”‚ â”‚   [Bubble Chart]             â”‚ â”‚
â”‚ â”‚    â•±â”€â”€â”€â•²           â”‚ â”‚        â—‹                     â”‚ â”‚
â”‚ â”‚   â•±     â•²          â”‚ â”‚    â—‹     â—‹                   â”‚ â”‚
â”‚ â”‚  â•±       â•²â”€        â”‚ â”‚  â—‹   â—‹       â—‹               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   [+ Add Chart] [Export All] [Full Screen] [Settings]
```

#### B. Chart Types & Use Cases

| Chart Type | Purpose | Data Dimensions |
|------------|---------|-----------------|
| **Scatter Plot** | Efficiency vs Power, Density vs Weight | 2D, size, color |
| **Bubble Chart** | Price vs Performance vs Market Share | 3D (x, y, size) |
| **Bar Chart** | Top 10 rankings, Category comparisons | 1D ranked |
| **Line Chart** | Trends over time, Percentile distribution | Time series |
| **Heatmap** | Manufacturer vs Efficiency matrix | 2D grid |
| **Radar Chart** | Multi-metric comparison (5-8 metrics) | Multi-axis |
| **Box Plot** | Distribution analysis, Outlier detection | Statistical |
| **Sankey** | Market flow, Technology adoption | Flow diagram |
| **Treemap** | Market share hierarchy | Hierarchical |
| **Parallel Coordinates** | Multi-dimensional analysis | 5+ dimensions |

#### C. Interactive Features

**Chart Interactions:**
- ğŸ–±ï¸ **Hover:** Show detailed tooltips
- ğŸ–±ï¸ **Click:** Highlight in table, show details
- ğŸ–±ï¸ **Zoom:** Pan & zoom for detailed view
- ğŸ–±ï¸ **Select:** Lasso select multiple points
- ğŸ–±ï¸ **Filter:** Click legend to show/hide series
- ğŸ–±ï¸ **Export:** PNG, SVG, PDF for reports

**Chart Configurations:**
```typescript
// Example: Efficiency vs Power Scatter Plot
{
  title: "Efficiency vs Power Rating",
  xAxis: { name: "Power (kW)", min: 0, max: 500 },
  yAxis: { name: "Efficiency (%)", min: 94, max: 99 },
  series: [{
    type: 'scatter',
    data: products.map(p => [p.power, p.efficiency]),
    symbolSize: (data, params) => params.data[2], // Size by market share
    itemStyle: {
      color: (params) => getManufacturerColor(params.data[3])
    }
  }],
  tooltip: {
    formatter: (params) => `
      Manufacturer: ${params.data.manufacturer}
      Model: ${params.data.model}
      Power: ${params.data[0]} kW
      Efficiency: ${params.data[1]}%
      Market Share: ${params.data[2]}%
    `
  }
}
```

---

## ğŸ› ï¸ Implementation Plan

### Phase 1: Editable Table with Validation (Week 1-2)

#### Step 1.1: Add Validation Status Field
**File:** `lib/types-enhanced.ts`
```typescript
export interface DataSource {
  // ... existing fields
  validation_status?: 'imported' | 'review' | 'validated' | 'rejected';
  validated_by?: string;
  validated_at?: string;
  validation_notes?: string;
}
```

#### Step 1.2: Replace SimpleDataTable with AG Grid
**File:** `components/AGGridTable.tsx` (new)
```typescript
import { AgGridReact } from 'ag-grid-react';
import 'ag-grid-enterprise'; // For advanced features
import 'ag-grid-community/styles/ag-grid.css';
import 'ag-grid-community/styles/ag-theme-alpine.css';

export default function AGGridTable({ data }: { data: EnhancedProductData[] }) {
  const [columnDefs] = useState([
    {
      field: 'data_source.validation_status',
      headerName: 'Status',
      editable: false,
      cellRenderer: ValidationStatusRenderer, // Custom cell renderer
      width: 120,
    },
    {
      field: 'identification.manufacturer',
      headerName: 'Manufacturer',
      editable: true,
      filter: 'agSetColumnFilter',
    },
    {
      field: 'identification.model',
      headerName: 'Model',
      editable: true,
      filter: 'agTextColumnFilter',
    },
    {
      field: 'power.rated_power_kw',
      headerName: 'Power (kW)',
      editable: true,
      type: 'numericColumn',
      cellEditor: 'agNumberCellEditor',
      cellEditorParams: { min: 0, max: 10000, precision: 2 },
      valueParser: params => Number(params.newValue),
      filter: 'agNumberColumnFilter',
    },
    {
      field: 'efficiency.peak_percent',
      headerName: 'Efficiency (%)',
      editable: true,
      type: 'numericColumn',
      cellEditor: 'agNumberCellEditor',
      cellEditorParams: { min: 0, max: 100, precision: 2 },
      cellStyle: params => getEfficiencyStyle(params.value),
      filter: 'agNumberColumnFilter',
    },
    // ... more columns
  ]);

  const onCellValueChanged = useCallback((event) => {
    // Save changes to database
    saveCellChange(event.data, event.colDef.field, event.newValue);
  }, []);

  return (
    <div className="ag-theme-alpine" style={{ height: 600, width: '100%' }}>
      <AgGridReact
        rowData={data}
        columnDefs={columnDefs}
        defaultColDef={{
          sortable: true,
          filter: true,
          resizable: true,
        }}
        onCellValueChanged={onCellValueChanged}
        enableRangeSelection
        enableFillHandle
        undoRedoCellEditing
        undoRedoCellEditingLimit={20}
        rowSelection="multiple"
        pagination
        paginationPageSize={25}
        sideBar={{
          toolPanels: ['columns', 'filters'],
        }}
      />
    </div>
  );
}
```

#### Step 1.3: Validation Status Renderer
**File:** `components/cell-renderers/ValidationStatusRenderer.tsx`
```typescript
export function ValidationStatusRenderer(params: ICellRendererParams) {
  const status = params.value;

  const statusConfig = {
    imported: { icon: 'ğŸŸ¡', label: 'Imported', color: 'text-yellow-600' },
    review: { icon: 'âšª', label: 'Review', color: 'text-gray-600' },
    validated: { icon: 'âœ…', label: 'Validated', color: 'text-green-600' },
    rejected: { icon: 'âŒ', label: 'Rejected', color: 'text-red-600' },
  };

  const config = statusConfig[status] || statusConfig.imported;

  return (
    <div className={`flex items-center gap-2 ${config.color}`}>
      <span>{config.icon}</span>
      <span className="text-sm font-medium">{config.label}</span>
    </div>
  );
}
```

#### Step 1.4: Validation Actions
**File:** `components/ValidationActions.tsx`
```typescript
export function ValidationActions({ gridRef }: { gridRef: RefObject<AgGridReact> }) {
  const validateSelected = () => {
    const selectedRows = gridRef.current?.api.getSelectedRows();
    selectedRows?.forEach(row => {
      row.data_source.validation_status = 'validated';
      row.data_source.validated_at = new Date().toISOString();
    });
    gridRef.current?.api.applyTransaction({ update: selectedRows });
    // Save to database
  };

  return (
    <div className="flex gap-2 mb-4">
      <button onClick={validateSelected} className="btn-primary">
        âœ… Validate Selected
      </button>
      <button onClick={() => {/* ... */}} className="btn-secondary">
        âšª Mark for Review
      </button>
      <button onClick={() => {/* ... */}} className="btn-danger">
        âŒ Reject Selected
      </button>
    </div>
  );
}
```

### Phase 2: Advanced Filtering (Week 2-3)

#### Step 2.1: Filter Builder Component
**File:** `components/AdvancedFilterBuilder.tsx`
```typescript
interface FilterRule {
  id: string;
  field: string;
  operator: string;
  value: any;
}

export function AdvancedFilterBuilder({ onApply }: { onApply: (filters: FilterRule[]) => void }) {
  const [rules, setRules] = useState<FilterRule[]>([]);
  const [matchType, setMatchType] = useState<'all' | 'any'>('all');

  const addRule = () => {
    setRules([...rules, {
      id: crypto.randomUUID(),
      field: 'power.rated_power_kw',
      operator: 'greaterThan',
      value: 100,
    }]);
  };

  return (
    <div className="filter-builder">
      <div className="match-type">
        <label>
          <input
            type="radio"
            checked={matchType === 'all'}
            onChange={() => setMatchType('all')}
          />
          Match ALL conditions
        </label>
        <label>
          <input
            type="radio"
            checked={matchType === 'any'}
            onChange={() => setMatchType('any')}
          />
          Match ANY condition
        </label>
      </div>

      {rules.map((rule, index) => (
        <FilterRuleRow
          key={rule.id}
          rule={rule}
          onChange={(updated) => {
            const newRules = [...rules];
            newRules[index] = updated;
            setRules(newRules);
          }}
          onRemove={() => setRules(rules.filter(r => r.id !== rule.id))}
        />
      ))}

      <button onClick={addRule}>+ Add Rule</button>
      <button onClick={() => onApply(rules)}>Apply Filter</button>
    </div>
  );
}
```

#### Step 2.2: Filter Presets
**File:** `lib/filter-presets.ts`
```typescript
export const FILTER_PRESETS = {
  highPower: {
    name: 'High Power Systems (>200kW)',
    rules: [
      { field: 'power.rated_power_kw', operator: 'greaterThan', value: 200 },
      { field: 'data_source.validation_status', operator: 'equals', value: 'validated' },
    ],
    matchType: 'all',
  },
  topEfficiency: {
    name: 'Top Efficiency (>97.5%)',
    rules: [
      { field: 'efficiency.peak_percent', operator: 'greaterThan', value: 97.5 },
      { field: 'data_source.validation_status', operator: 'equals', value: 'validated' },
    ],
    matchType: 'all',
  },
  needsValidation: {
    name: 'Needs Validation',
    rules: [
      { field: 'data_source.validation_status', operator: 'equals', value: 'imported' },
      { field: 'data_source.source', operator: 'equals', value: 'pdf_extraction' },
    ],
    matchType: 'all',
  },
};
```

### Phase 3: Professional Charts (Week 3-4)

#### Step 3.1: Chart Configuration System
**File:** `lib/chart-configs.ts`
```typescript
export const CHART_CONFIGS = {
  efficiencyVsPower: {
    title: 'Efficiency vs Power Rating',
    type: 'scatter',
    xAxis: 'power.rated_power_kw',
    yAxis: 'efficiency.peak_percent',
    size: 'competitive.market_share_estimate_percent',
    color: 'identification.manufacturer',
  },
  marketShare: {
    title: 'Market Share Distribution',
    type: 'pie',
    dimension: 'identification.manufacturer',
    metric: 'competitive.market_share_estimate_percent',
  },
  powerDensity: {
    title: 'Power Density Comparison (Top 10)',
    type: 'bar',
    dimension: 'identification.model',
    metric: 'power_density',
    sort: 'desc',
    limit: 10,
  },
  // ... more chart configs
};
```

#### Step 3.2: Chart Component
**File:** `components/ProfessionalChart.tsx`
```typescript
import ReactECharts from 'echarts-for-react';

export function ProfessionalChart({ config, data }: ChartProps) {
  const option = useMemo(() => {
    switch (config.type) {
      case 'scatter':
        return generateScatterOption(config, data);
      case 'pie':
        return generatePieOption(config, data);
      case 'bar':
        return generateBarOption(config, data);
      // ... more chart types
    }
  }, [config, data]);

  return (
    <ReactECharts
      option={option}
      style={{ height: '400px', width: '100%' }}
      opts={{ renderer: 'svg' }}
      onEvents={{
        click: (params) => {
          // Handle chart click - highlight in table
          highlightProductInTable(params.data.id);
        },
      }}
    />
  );
}
```

---

## ğŸ“¦ Implementation Checklist

### Phase 1: Editable Table âœ…
- [ ] Add validation_status field to types
- [ ] Install/configure AG Grid Enterprise
- [ ] Create AGGridTable component
- [ ] Create ValidationStatusRenderer
- [ ] Create ValidationActions component
- [ ] Implement save/update API endpoints
- [ ] Add undo/redo functionality
- [ ] Test inline editing
- [ ] Test bulk validation

### Phase 2: Advanced Filtering âœ…
- [ ] Create AdvancedFilterBuilder component
- [ ] Create FilterRuleRow component
- [ ] Create QuickFilters component
- [ ] Implement filter presets system
- [ ] Add save/load preset functionality
- [ ] Integrate with AG Grid filtering
- [ ] Test complex filter combinations
- [ ] Add filter export/import

### Phase 3: Professional Charts âœ…
- [ ] Define chart configuration schema
- [ ] Create chart config library
- [ ] Create ProfessionalChart component
- [ ] Implement scatter plot
- [ ] Implement bubble chart
- [ ] Implement bar/column charts
- [ ] Implement heatmap
- [ ] Implement radar chart
- [ ] Add chart export (PNG/SVG/PDF)
- [ ] Add chart-to-table linking
- [ ] Test all chart types

### Phase 4: Integration & Testing âœ…
- [ ] Integrate all components in dashboard
- [ ] Add keyboard shortcuts
- [ ] Add accessibility features
- [ ] Write E2E tests for editing
- [ ] Write E2E tests for filtering
- [ ] Write E2E tests for charts
- [ ] Performance testing (1000+ products)
- [ ] Documentation

---

## ğŸš€ Quick Start (After Implementation)

### 1. Edit Product Data
```
1. Go to Dashboard â†’ Product Analysis tab
2. Double-click any cell to edit
3. Tab to move to next field
4. Press Enter to save changes
5. Click "Validate" to mark as verified
```

### 2. Apply Advanced Filters
```
1. Click "+ Advanced Filters" button
2. Add rules: "Power > 100 AND Efficiency > 96"
3. Click "Apply Filter"
4. Save as preset: "My Custom Filter"
```

### 3. Create Charts
```
1. Go to "Charts" tab
2. Click "+ Add Chart"
3. Select "Efficiency vs Power Scatter"
4. Configure axes and filters
5. Click point to see in table
```

---

## ğŸ’° Cost Estimate

| Component | License/Cost | Notes |
|-----------|--------------|-------|
| AG Grid Enterprise | $999/year per developer | Already have Community version |
| Apache ECharts | Free (MIT) | Already installed |
| Development Time | ~4 weeks | 1 developer full-time |
| Testing | 1 week | E2E + manual testing |
| **Total** | **$999 + 5 weeks** | One-time + ongoing license |

**Alternative: AG Grid Community (Free)**
- âœ… Basic editing
- âœ… Sorting, filtering
- âŒ No advanced filters
- âŒ No range selection
- âŒ No Excel export (CSV only)

---

## ğŸ“ Next Steps

1. **Review this plan** - Confirm requirements and approach
2. **Decide on AG Grid license** - Enterprise vs Community
3. **Prioritize phases** - All 3 phases or start with Phase 1?
4. **Approve implementation** - Green light to proceed?

**Recommendation:** Start with **Phase 1 (Editable Table)** first, as it provides immediate value for data validation workflow. Then add filtering and charts incrementally.

---

**Status: â³ AWAITING APPROVAL**

Ready to proceed when you confirm the plan! ğŸš€
